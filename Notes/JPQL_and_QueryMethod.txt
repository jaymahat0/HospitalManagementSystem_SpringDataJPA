
SPRING DATA JPA NOTES
====================

For Detail Explanation visit Link:
==================================

1. JPA Query Methods : https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html

TOPIC 1: JPQL (Java Persistence Query Language)
----------------------------------------------

1. What is JPQL?
- JPQL is an object-oriented query language defined by JPA.
- It operates on Entity objects and their fields, not directly on database tables.
- Syntax is similar to SQL, but queries are written using Entity names and attributes.

Example:
@Entity
class Student {
    @Id
    private Long id;
    private String name;
    private int age;
}

JPQL Query:
SELECT s FROM Student s WHERE s.age > 20


2. Key Characteristics of JPQL
- Database independent
- Works with entity classes
- Converted to SQL by JPA provider (Hibernate)
- Supports CRUD operations (mostly SELECT, UPDATE, DELETE)

3. JPQL Syntax Structure
SELECT <alias>
FROM <EntityName> <alias>
WHERE <condition>
ORDER BY <field>

Example:
SELECT e FROM Employee e WHERE e.salary > 50000 ORDER BY e.name


4. JPQL Types of Queries

a) Select Query
SELECT s FROM Student s

b) Where Clause
SELECT s FROM Student s WHERE s.name = 'Amit'

c) Update Query
UPDATE Student s SET s.age = 25 WHERE s.id = 1

d) Delete Query
DELETE FROM Student s WHERE s.age < 18


5. Using JPQL in Spring Data JPA

Using @Query annotation:

@Query("SELECT s FROM Student s WHERE s.name = :name")
List<Student> findByName(@Param("name") String name);


6. JPQL Flow (Execution Flow)

[Controller]
     |
     v
[Service Layer]
     |
     v
[Repository Method (@Query with JPQL)]
     |
     v
[JPA Provider (Hibernate)]
     |
     v
[SQL Generated]
     |
     v
[Database]
     |
     v
[Result Mapped to Entity]


------------------------------------------------------------

TOPIC 2: QUERY METHODS (DERIVED QUERY METHODS)
----------------------------------------------

1. What is Query Method?
- Query Methods are automatically generated by Spring Data JPA.
- Method name defines the query logic.
- No need to write JPQL or SQL explicitly.

Example:
List<Student> findByName(String name);


2. Naming Convention
Structure:
findBy + PropertyName + Condition

Examples:
findByAge(int age)
findByNameAndAge(String name, int age)
findByAgeGreaterThan(int age)
findByNameContaining(String keyword)


3. Common Keywords

Keyword              Meaning
------------------------------------------------
And                  AND condition
Or                   OR condition
Between              Range
LessThan             <
GreaterThan          >
Like                 LIKE
Containing           %value%
StartingWith         value%
EndingWith           %value
OrderBy              Sorting


4. Examples of Query Methods

findByAgeGreaterThan(18)
findByNameAndAge("Rahul", 22)
findByNameContaining("ma")
findByAgeBetween(18, 25)
findByNameOrderByAgeDesc(String name)


5. Query Method Flow

[Controller]
     |
     v
[Service]
     |
     v
[Repository Method Name Parsed]
     |
     v
[Spring Data JPA Query Generator]
     |
     v
[JPQL Generated]
     |
     v
[Hibernate Converts to SQL]
     |
     v
[Database]
     |
     v
[Result as Entity List]


------------------------------------------------------------

COMPARISON: JPQL vs QUERY METHOD
--------------------------------

JPQL:
- More control over queries
- Complex queries possible
- Requires writing query manually
- Suitable for joins, subqueries

Query Method:
- Very simple to use
- No query writing
- Limited for very complex logic
- Best for simple CRUD operations


WHEN TO USE WHAT?
------------------
- Use Query Method for simple conditions
- Use JPQL when:
  * Multiple joins are required
  * Custom projections needed
  * Performance tuning required


------------------------------------------------------------

END OF NOTES
